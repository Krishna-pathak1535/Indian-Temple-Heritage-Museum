# Environment Variables Reference

## Backend Environment Variables (Railway)

### Database (Auto-created by Railway MySQL)
```
MYSQL_HOST=containers-us-west-xxx.railway.app
MYSQL_PORT=6379
MYSQL_USER=root
MYSQL_PASSWORD=xxxxxxxxxxxxx
MYSQL_DATABASE=railway
```

OR (Railway also provides these aliases):
```
MYSQLHOST=containers-us-west-xxx.railway.app
MYSQLPORT=6379
MYSQLUSER=root
MYSQLPASSWORD=xxxxxxxxxxxxx
MYSQLDATABASE=railway
```

### Application (Manual Setup Required)
```
SECRET_KEY=your-super-secret-key-change-this-in-production-min-32-chars
ENVIRONMENT=production
FRONTEND_URL=https://your-app.vercel.app
```

---

## Frontend Environment Variables (Vercel)

### Production (.env.production)
```
VITE_API_URL=https://your-backend.up.railway.app
```

### Development (.env.local) - For local testing
```
VITE_API_URL=http://localhost:8000
```

---

## How to Generate SECRET_KEY

### Option 1: Python
```python
import secrets
print(secrets.token_urlsafe(32))
```

### Option 2: PowerShell
```powershell
[Convert]::ToBase64String((1..32 | ForEach-Object { Get-Random -Maximum 256 }))
```

### Option 3: Online Generator
Use: https://randomkeygen.com/ (select "CodeIgniter Encryption Keys")

---

## Important Notes

1. **Never commit .env files to Git** - They are already in .gitignore
2. **SECRET_KEY must be at least 32 characters** for JWT security
3. **Railway automatically links database variables** when you add MySQL service
4. **FRONTEND_URL must match exactly** - no trailing slash
5. **VITE_ prefix is required** for Vite to expose variables to client

---

## Testing Environment Variables

### Backend (Local)
Create `backend/.env` file:
```
MYSQL_USER=root
MYSQL_PASSWORD=root
MYSQL_HOST=localhost
MYSQL_PORT=3306
MYSQL_DATABASE=temple_museum
SECRET_KEY=development-secret-key-not-for-production
ENVIRONMENT=development
FRONTEND_URL=http://localhost:5173
```

### Frontend (Local)
Create `frontend/.env.local` file:
```
VITE_API_URL=http://localhost:8000
```

---

## Verification Checklist

### Before Deployment
- [ ] All environment variable names are correct
- [ ] SECRET_KEY is strong (32+ chars)
- [ ] .env files are in .gitignore
- [ ] No secrets committed to Git

### After Backend Deployment
- [ ] Railway MySQL variables are linked
- [ ] SECRET_KEY is set
- [ ] ENVIRONMENT=production
- [ ] FRONTEND_URL is set (update after frontend deploy)
- [ ] Backend URL is generated (Settings → Networking → Generate Domain)

### After Frontend Deployment
- [ ] VITE_API_URL points to Railway backend
- [ ] Frontend URL is generated by Vercel
- [ ] Update FRONTEND_URL in Railway backend variables
- [ ] Redeploy backend if FRONTEND_URL was changed

---

## Common Mistakes

❌ **WRONG**: `API_URL` (missing VITE_ prefix for frontend)  
✅ **CORRECT**: `VITE_API_URL`

❌ **WRONG**: `FRONTEND_URL=https://myapp.vercel.app/` (trailing slash)  
✅ **CORRECT**: `FRONTEND_URL=https://myapp.vercel.app`

❌ **WRONG**: Hardcoding secrets in code  
✅ **CORRECT**: Using os.getenv() in backend, import.meta.env in frontend

❌ **WRONG**: Using development SECRET_KEY in production  
✅ **CORRECT**: Generate new strong SECRET_KEY for production

---

## Quick Copy-Paste Template

### For Railway Backend (Variables tab)
```
SECRET_KEY=GENERATE_32_CHAR_SECRET_KEY_HERE
ENVIRONMENT=production
FRONTEND_URL=PASTE_YOUR_VERCEL_URL_HERE
```

### For Vercel Frontend (Environment Variables)
```
VITE_API_URL=PASTE_YOUR_RAILWAY_BACKEND_URL_HERE
```
